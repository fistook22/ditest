(function(){function w(a){return void 0===a||null===a}function x(){l||(l=window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.item&&window.Static.SQUARESPACE_CONTEXT.product?O:q)}function B(a){console.log("insert");if(r())console.log("add wix button"),m.push(a),clearTimeout(C),C=setTimeout(D,3E3);else if(!window.Static||!window.Static.SQUARESPACE_CONTEXT||window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.item&&window.Static.SQUARESPACE_CONTEXT.product)a.lazy?
    P(a):setTimeout(function(b){x();y(b)},a.delay||0,a)}function P(a){x();var b=0,c=setInterval(function(){if(15==b)clearInterval(c),console.log("Cannot load lazy widget");else try{null!==(n()?window.parent:window).document.querySelector(a.artwork_url)&&(clearInterval(c),y(a)),b++}catch(d){console.log(d),clearInterval(c)}},400)}function E(a,b,c,d){a=new CustomEvent("artworkdatachanged",{detail:{index:a,height:b,size:c,price:d}});window.dispatchEvent(a)}function n(){try{return window.location.href!=window.parent.location.href}catch(a){return!1}}
    function r(){return null!=document.querySelector('meta[http-equiv="X-Wix-Meta-Site-Id"]')}function F(){var a=document.querySelectorAll("artplacer");t=a.length;for(var b=0;b<t;b++){var c=a[b];var d="gallery type artwork artwork_url height unit resizable frames catalog default_style frames_included collection lang text classname size price space image thumb title bgcolor fontcolor bordercolor galleryname width placement artist lazy".split(" ");for(var f={},g=0;g<d.length;g++)f[d[g]]=c.getAttribute(d[g]);
        c=f;d=a[b];d.innerHTML="";if("floating"==c.placement){G();var h=document.querySelector(".fixed-artplacer-container");d=null}l(c,d,h)}}function H(){t=0;e=[];r()&&(m=[])}function q(a,b,c){if(Q.includes(parseInt(a.type)))if(parseFloat(a.gallery)!==parseInt(a.gallery)){var d=!1;var f="Invalid or missing gallery id."}else d=!0,f=void 0;else d=!1,f="Missing type attribute";d?(e.push(a),a=R(e.length-1)):a=document.createElement("p").appendChild(document.createTextNode("ArtPlacer Widget Error: "+f));(c||
        b).appendChild(a)}function O(a,b,c){var d=window.Static.SQUARESPACE_CONTEXT;"1"==a.type&&(a.title=d.item.title,null==a.price||void 0==a.price)&&(a.price=(new Intl.NumberFormat(d.website.language,{style:"currency",currency:d.product.variants[0].price.currencyCode,minimumFractionDigits:2})).format(d.product.variants[0].price.decimalValue));"3"==a.type&&(a.title=d.item.title);I(window.location.origin+d.item.fullUrl,{format:"json"},function(f,g){if(200==g){var h=f.item,J=h.variants[0];!z(a.artwork_url)&&
    isNaN(a.artwork)&&(a.artwork_url=(h.items?h.items[0]:h).assetUrl);isNaN(a.artwork)&&isNaN(a.height)&&5<J.height&&(a.height=J.height/("1"==f.websiteSettings.storeSettings.measurementStandard?1:2.54))}else console.log("api call failed with status",g);q(a,b,c)})}function S(a,b,c){console.log("appending wix button");var d=u(),f=d?d.options.filter(function(g){return-1<g.key.toLowerCase().indexOf("size")}).map(function(g){return g.selections}):[];0<f.length&&(a.height=parseFloat(f[0][0].value.split("x")));
        "1"==a.type&&(a.title=v("product-title"),a.price=v("formatted-primary-price")||v("price-range-from"),d&&0<f.length&&(a.size=f[0][0].value));"3"==a.type&&(a.title=v("product-title"));z(a.artwork_url)||(a.artwork_url=T());q(a,b,c)}function u(){var a=document.querySelector("script#wix-warmup-data");if(!a)return!1;a=JSON.parse(a.textContent).appsWarmupData;if(0==Object.keys(a).length)return!1;a=a[Object.keys(a)[0]];return a[Object.keys(a)[0]].catalog.product}function v(a){a="[data-hook="+a+"]";return document.querySelector(a)?
        document.querySelector(a).textContent:""}function T(){var a=document.querySelector("img[data-hook=product-image]"),b=document.querySelector("[data-hook=responsive-gallery-media]");console.log({product_image:a,gallery_media:b});return a?a.src:b?b.style.backgroundImage.slice(5,-2):u()&&0<u().length?u().media[0].fullUrl:""}function U(a){if(r()&&a.data.intent&&"WIX_CODE"==a.data.intent)console.log("wix code event"),D();else if(a.data.type){var b=K();switch(a.data.type){case "close":L(b);break;case "dimensions_changed":b.style.width=
        a.data.width+"px";b.style.height=Math.max(a.data.height,p.min_height)+"px";break;case "main_screen_loaded":b.style.width=p.width+"px";b.style.height=p.height+"px";break;case "request_height":b.contentWindow.postMessage({type:"height",value:(n()?window.parent:window).innerHeight},"*")}}}function K(){return document.getElementById("artplacer-iframe")||window.parent.document.getElementById("artplacer-iframe")}function L(a){a=a.parentNode;a.closest("body").style.overflow="visible";a.parentNode.removeChild(a)}
    function V(a,b){var c=new XMLHttpRequest,d="";b&&(d=Object.keys(b).map(function(f){return f+"="+encodeURIComponent(b[f])}).join("&"));c.open("POST",a,!0);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.send(d)}function I(a,b,c){var d=new XMLHttpRequest,f="";b&&(f="?"+Object.keys(b).map(function(g){return g+"="+encodeURIComponent(b[g])}).join("&"));d.open("GET",a+f,!0);d.onreadystatechange=function(){if(4==d.readyState){try{var g=JSON.parse(d.responseText)}catch(h){g=d.responseText}c(g,
        d.status)}};d.send()}function A(a){var b;if(a.artwork_url)try{if(b=document.querySelector(a.artwork_url))return b.src}catch(c){return a.artwork_url}return(a=a.image&&document.querySelector(a.image))?a.src:null}function W(a){var b=e[a].bgcolor?"background-color: "+e[a].bgcolor+";":"";b+=e[a].fontcolor?"color: "+e[a].fontcolor+";":"";(b+=e[a].bordercolor?"border: 1px solid "+e[a].bordercolor+";":e[a].bgcolor||e[a].fontcolor?"border: 0;":"")&&(b+="padding: .8em 1.4em;");return b}function X(a){return function(b){b.preventDefault();
        b=M;var c=e[a],d="//widget.artplacer.com/",f=A(c);"1"==c.type?(d+="?size="+encodeURIComponent(c.size||""),c.price&&(d+="&price="+encodeURIComponent(c.price||"")),c.title&&(d+="&title="+encodeURIComponent(c.title||""))):"2"==c.type&&(d+="try-space.php?space_id="+c.space);d+="&gallery_id="+c.gallery;d+=f?"&artwork_url="+f:c.artwork?"&artwork_id="+c.artwork:"";c.height&&0<parseFloat(c.height)&&(d+="&height="+("cm"==c.unit?c.height/2.54:c.height));c.resizable&&(d+="&resize="+c.resizable);c.frames&&(d+=
            "&frames="+c.frames);c.catalog&&(d+="&catalog="+c.catalog);c.lang&&(d+="&lang="+c.lang);c.frames_included&&(d+="&frames_included="+c.frames_included);c.collection&&(d+="&collection="+encodeURIComponent(c.collection));b(d,Y)}}function M(a,b,c){var d=(n()?window.parent:window).document.querySelector("body"),f=document.createElement("div");d.style.overflow="hidden";f.style="background-color: rgba(0,0,0,0.7); width: 100%; height: 100%; position: fixed; left: 0; top: 0; z-index: 9999999";f.className="artplacer-alpha";
        f.innerHTML='<iframe id="artplacer-iframe" src="'+a+'" style="'+b+'" frameborder="0""></iframe>';c&&f.addEventListener("click",function(){L(K())});d.insertBefore(f,null)}function N(a,b){a.onclick=function(c){c.preventDefault()};I("//widget.artplacer.com/shortlink.php",{title:e[b].title||"Untitled",height:e[b].height&&0<parseFloat(e[b].height)?e[b].height:"",image:A(e[b])||"",artist:e[b].artist||"",gallery:e[b].gallery,id:e[b].artwork||"0"},function(c,d){400<=d||(a.onclick=function(f){f.preventDefault();
        V(c.trackLink,{image:A(e[b])||"",gallery_id:e[b].gallery,artwork_id:e[b].artwork||"0"});k.any()?window.open(c.shortLink,"_blank"):M("//widget.artplacer.com/qr.php?url="+c.shortLink,"position: absolute; left: 0; top: 0; bottom: 0; right: 0; margin: auto; max-width: 99%; max-height: 100%; -webkit-transition: height 0.13s, width 0.13s; transition: height 0.13s, width 0.13s;width: 1100px; height: 500px;",!0)})})}function R(a){var b=document.createElement("button");3==e[a].type?N(b,a):b.onclick=X(a);b.classList.add("artplacer-button");
        b.classList.add(e[a].lang||"en");e[a].classname&&e[a].classname.split(" ").forEach(function(d){b.classList.add(d)});b.style=e[a].default_style?"display: inline-block;width: auto;background-color: rgb(227, 30, 55);border-radius: 0; color: #fff; font-size: 12px; font-weight: 700;letter-spacing: 2px;text-decoration: none; text-align: center; margin: 6px 6px 6px 0; text-transform: uppercase; padding: 10px 30px; line-height: 2.2; vertical-align: middle; box-sizing: border-box; border: 0; min-width:212px; max-width:100%":
            W(a);b.setAttribute("data-index",a);b.style.cursor="pointer";if(z(e[a].thumb)){var c=document.createElement("img");c.src=e[a].thumb;b.style.border=0;b.style.padding=0;b.appendChild(c);e[a].text&&(c=document.createElement("label"),c.appendChild(document.createTextNode(e[a].text)),b.appendChild(c))}else b.appendChild(document.createTextNode(e[a].text||("1"==e[a].type?"Try in your room":"3"==e[a].type?"View in AR":"View in a Room")));return b}function D(){console.log("checking for wix buttons");0!=m.length&&
    (console.log("found"),setTimeout(function(){l=r()&&null!==document.querySelector("[data-hook=product-page]")?S:q;m.forEach(function(a){y(a)});m=[]},500))}function y(a){for(var b=["artwork_url","title","size","height","price"],c,d=0;d<b.length;d++)try{a[b[d]]&&(c=(n()?window.parent:window).document.querySelector(a[b[d]]),null!=c&&(a[b[d]]=0==d?c.src:c.textContent))}catch(g){}b=a.after&&a.after.trim()&&document.querySelector(a.after);if(b){c=b.parentNode;var f=b.nextSibling}else G(),c=document.querySelector(".fixed-artplacer-container");
        l(a,f,c)}function G(){if(!document.querySelector(".fixed-artplacer-container")){var a=document.createElement("div");a.className="fixed-artplacer-container";a.style.cssText="position:fixed; padding:12px;right: 0;bottom:0; z-index:999; background:rgba(255, 255, 255, 0.4); text-align:center";document.body.appendChild(a)}}function z(a){return!!RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$",
        "i").test(a)}var Q=[1,2,3],p={width:570,height:559,min_height:426},Y="position: absolute; left: 0; top: 0; bottom: 0; right: 0; margin: auto; max-width: 99%; max-height: 100%; -webkit-transition: height 0.13s, width 0.13s; transition: height 0.13s, width 0.13s;width: "+p.width+"px; height: "+p.height+"px;",k={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)||
            navigator.maxTouchPoints&&2<navigator.maxTouchPoints&&/MacIntel/.test(navigator.platform)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return k.Android()||k.BlackBerry()||k.iOS()||k.Opera()||k.Windows()}},e=[],t,m=[],C,l;window.ArtPlacer={insert:B,changeData:E,changeAll:function(a,b,c){for(var d=0;d<e.length;d++)E(d,a,b,c)},reload:function(){var a=e.splice(t);0==a.length&&0==document.querySelectorAll("artplacer").length?
            console.log("No widgets to reload"):(H(),F(),a.forEach(function(b){return B(b)}))},clear:function(){H();var a=document.querySelectorAll(".artplacer-button",".fixed-artplacer-container");null!=a&&a.forEach(function(b){return b.remove()})}};(function(){(n()?window.parent:window).addEventListener("message",U,!1);window.addEventListener("artworkdatachanged",function(a){setTimeout(function(){w(a.detail.height)||(e[a.detail.index].height=a.detail.height);w(a.detail.size)||(e[a.detail.index].size=a.detail.size);
        w(a.detail.price)||(e[a.detail.index].price=a.detail.price);if(3==e[a.detail.index].type){var b=document.querySelector('.artplacer-button[data-index="'+a.detail.index+'"]');b?N(b,a.detail.index):console.log("Error: Cannot find AR button")}},100)});window.addEventListener("DOMContentLoaded",function(a){console.log("dom loaded");x();F()})})()})();